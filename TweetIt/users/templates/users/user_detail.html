{% extends 'tweets/base.html' %}
{% block content %}
<style>
    .container-fluid {
        padding-left: 0;
        padding-right: 0;
    }
  .cover-image {
      width: 100%;
      height: 32vh;
      background-repeat: no-repeat;
      background-size: cover;
  }
  .cover-image img {
      width: 100%;
      height: 32vh;
  }
  .user-info {
    width: 100%;
    display: flex;
    justify-content: space-around;
    align-items: center;
    height: 70px;
    background-color: #e4e4e4;
  }
  .user-info-actual {
      width: 500px;
  }
  .user-info .user-info-actual ul {
      display: flex;
      justify-content: space-between;
      align-items: center;
      list-style: none;
      width: 100%;
      margin-bottom: 0px;
      padding-left: 0px;
  }
  .edit-profile-button {
      justify-items: center;
      background: none;
      border-radius: 1px 5px 1px 5px;
      border: none;
      background-color: #dffafa;
      padding: 3px;
      text-decoration: none;
  }
</style>
<div class="row">
    <div class="col-lg-12 cover-image">
        <img src="{{ object.profile.cover.url }}" alt="">
    </div>
</div>
<div class="row">
    <div class="col-lg-12 user-info">
        <div class="user-info-actual">
                <ul>
                        <li><a href="{% url 'user-following' object.username %}">Following({{ object.user_profile.following.all.count }})</a></li>
                        <li><a href="{% url 'user-follower' object.username %}">Follower({{ object.followed_by.all.count }})</a></li>
                        <li><a href="">Likes</a></li>
                </ul>
        </div>
        <div class="edit-profile-button-container">
            <a class="btn btn-primary" href="{% url 'profile' %}">Edit Your Profile</a>
        </div>
    </div>
</div>
<div class="row">
        <div class="col-lg-2 col-sm-5">
                <div class="card mt-2" style="margin-left: 10px;">
                        <img class="card-img-top" src="{{ object.profile.image.url }}" alt="Card image cap">
                        <div class="card-body">
                          <h5 class="card-title">{{ object.username }}</h5>
                          <p class="card-text">Joined {{ object.date_joined }}</p>
                          <p class="card-text">{{ object.profile.description }}</p>
                        </div>
                </div>
        </div>
        <div class="col-lg-6 col-sm-5 mt-2">
                {% for tweet in object.tweet_set.all %}
                <div class='media border p-3'>
                    <img src="{{ object.profile.image.url }}" alt='{{ object.username }}' class="mr-3 mt-3 rounded-circle" style="width:60px;">
                    <div class="media-body">
                        <h5>{{ object.username }}<small> Posted {{ tweet.date_posted|timesince }} ago </small></h5>
                        <p class="media-content">{{ tweet.content }}</p>
                    </div>
                </div>
                {% empty %}
                <p class="mt-2">Cannot find any tweets right now</p>
                {% endfor %}
        </div>
        <div class="col-lg-4"></div>
</div>


{% endblock content %}
<!-- {% block style %}
<script>
        function updateHashLinks(){
            $(".media-content").each(function(data){
                console.log($(this));
                var hashtagRegex = /(^|\s)#([\w\d-]+)/g
                var newText = $(this).html().replace(hashtagRegex,"$1<a href='/tags/$2/'>#$2</a>");
                $(this).html(newText);
            })
        }
        updateHashLinks();
        console.log("running");
    </script>
{% endblock style %} -->
{% block endscript %}
<script>
    $(document).ready(function(){
        function updateHashLinks(){
            $(".media-content").each(function(data){
                var hashtagRegex = /(^|\s)#([\w\d-]+)/g
                var newText = $(this).html().replace(hashtagRegex,"$1<a href='/tags/$2/'>#$2</a>");
                $(this).html(newText);
            })
        }
        updateHashLinks();
    })
    
</script>
{% endblock endscript %}